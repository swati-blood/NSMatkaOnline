Index: app/src/main/java/in/matka/ns/Activity/VerificationActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package in.matka.ns.Activity;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.CountDownTimer;\r\n\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.android.volley.Request;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.Locale;\r\nimport java.util.concurrent.TimeUnit;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\nimport in.matka.ns.AppController;\r\nimport in.matka.ns.Common.Common;\r\nimport in.matka.ns.Model.ForgetWhatsappModel;\r\nimport in.matka.ns.R;\r\nimport in.matka.ns.SmsReceiver;\r\nimport in.matka.ns.Util.ConnectivityReceiver;\r\nimport in.matka.ns.Util.CustomJsonRequest;\r\nimport in.matka.ns.Util.SmsListener;\r\nimport in.matka.ns.networkconnectivity.NoInternetConnection;\r\nimport retrofit2.http.FormUrlEncoded;\r\n\r\nimport static in.matka.ns.Activity.splash_activity.msg_status;\r\nimport static in.matka.ns.Config.BaseUrls.URL_FORGET_PASSWORD_WHATSAPP;\r\nimport static in.matka.ns.Config.BaseUrls.URL_GENERATE_OTP;\r\nimport static in.matka.ns.Config.BaseUrls.URL_VERIFICATION;\r\n\r\n\r\npublic class VerificationActivity extends AppCompatActivity implements View.OnClickListener {\r\nImageView iv_back;\r\n    RelativeLayout rel_gen,rel_verify,rel_timer,rel_forgetWhatsapp;\r\n    EditText et_phone;\r\n    Button btn_send,btn_verify,btn_resend,btn_whatsapp;\r\n    TextView tv_timer;\r\n    String type=\"\";\r\n    String otp=\"\",mobile=\"\" ;\r\n    Common common;\r\n    ProgressDialog loadingBar;\r\n    String str=\"\";\r\n    //OTPView et_otp;\r\n    EditText et_otp;\r\n    TextView tv_whatsappMsg;\r\n    ArrayList<ForgetWhatsappModel> wList;\r\n\r\n    public static final String OTP_REGEX = \"[0-9]{3,6}\";\r\n    CountDownTimer countDownTimer,cTimer ;\r\n    private final int REQUEST_ID_MULTIPLE_PERMISSIONS=1;\r\n   Activity ctx=VerificationActivity.this;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_verification);\r\n        initViews();\r\n        forgetPasswordWhatsapp();\r\n        Log.e(\"status\",msg_status);\r\n        if (msg_status.equals(\"0\"))\r\n        {\r\n            rel_forgetWhatsapp.setVisibility(View.VISIBLE);\r\n        }else if (msg_status.equals(\"1\"))\r\n        {\r\n            rel_gen.setVisibility(View.VISIBLE);\r\n        }\r\n        else {\r\n            rel_forgetWhatsapp.setVisibility(View.GONE);\r\n            rel_gen.setVisibility(View.GONE);\r\n        }\r\n\r\n    }\r\n\r\n    private void initViews() {\r\n        iv_back=findViewById (R.id.iv_back);\r\n\r\n        iv_back.setOnClickListener (new View.OnClickListener ( ) {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish ();\r\n            }\r\n        });\r\n        rel_gen=findViewById(R.id.rel_gen);\r\n        rel_verify=findViewById(R.id.rel_verify);\r\n        rel_timer=findViewById(R.id.rel_timer);\r\n        et_phone=findViewById(R.id.et_phone);\r\n        btn_whatsapp = findViewById(R.id.btn_whatsapp);\r\n        rel_forgetWhatsapp = findViewById(R.id.rel_forgetWhatsapp);\r\n//        et_otp=(OTPView) findViewById(R.id.et_otp);\r\n        et_otp=findViewById(R.id.et_otp);\r\n        tv_whatsappMsg = findViewById(R.id.tv_whatsappMsg);\r\n        wList = new ArrayList<>();\r\n\r\n\r\n        if (et_phone.getText().toString().length() > 0) {\r\n            et_phone.getText().clear();\r\n        }\r\n\r\n        btn_send=findViewById(R.id.btn_send);\r\n        btn_verify=findViewById(R.id.btn_verify);\r\n        btn_resend=findViewById(R.id.btn_resend);\r\n        tv_timer=findViewById(R.id.tv_timer);\r\n        common=new Common(ctx);\r\n        loadingBar=new ProgressDialog(ctx);\r\n        loadingBar.setMessage(\"Loading...\");\r\n        loadingBar.setCanceledOnTouchOutside(false);\r\n        type=getIntent().getStringExtra(\"type\");\r\n        btn_send.setOnClickListener(this);\r\n        btn_verify.setOnClickListener(this);\r\n        btn_resend.setOnClickListener(this);\r\n        setCounterTimer(120000,tv_timer);\r\n        checkAndRequestPermissions();\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n\r\n        if(view.getId() ==R.id.btn_send)\r\n        {\r\n           mobile=et_phone.getText().toString();\r\n           otp=common.getRandomKey(6);\r\n           if(mobile.isEmpty())\r\n           {\r\n               common.showToast(\"Enter Mobile Number\");\r\n               et_phone.requestFocus();\r\n           }\r\n           else if(mobile.length()!=10)\r\n           {\r\n               common.showToast(\"Invalid Mobile Number\");\r\n               et_phone.requestFocus();\r\n           }\r\n           else\r\n           {\r\n               if (ConnectivityReceiver.isConnected()) {\r\n\r\n                   if(type.equalsIgnoreCase(\"f\"))\r\n                   {\r\n                       sendOtpforPass(mobile,otp, URL_GENERATE_OTP);\r\n                   }\r\n                   else\r\n                   {\r\n                       sendOtpforPass(mobile,otp,URL_VERIFICATION);\r\n                   }\r\n               }\r\n               else\r\n               {\r\n                   Intent intent = new Intent(VerificationActivity.this, NoInternetConnection.class);\r\n                   startActivity(intent);\r\n               }\r\n\r\n           }\r\n        }\r\n        else if(view.getId() == R.id.btn_verify)\r\n        {\r\n          //String stringOtp=et_otp.getOtp ().toString();\r\n            String stringOtp=et_otp.getText ().toString();\r\n          if(stringOtp.isEmpty())\r\n          {\r\n              common.showToast(\"Enter OTP\");\r\n               et_otp.requestFocus();\r\n          }\r\n          else if(stringOtp.length()<4)\r\n          {\r\n              common.showToast(\" OTP is too short\");\r\n              et_otp.requestFocus();\r\n          }\r\n          else\r\n          {\r\n              if(tv_timer.getText().toString().equalsIgnoreCase(\"timeout\"))\r\n              {\r\n                  common.showToast(\"Timeout\");\r\n              }\r\n              else\r\n              {\r\n                  if(otp.equals(stringOtp))\r\n                  {\r\n                       if(type.equalsIgnoreCase(\"f\"))\r\n                       {\r\n                           Intent intent=new Intent(ctx,UpdatePasswordActivity.class);\r\n                           intent.putExtra(\"mobile\",mobile);\r\n                           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                           intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                           startActivity(intent);\r\n\r\n                           finish();\r\n                       }\r\n                       else\r\n                       {\r\n                           Intent intent=new Intent(ctx,RegisterActivity.class);\r\n                           intent.putExtra(\"mobile\",mobile);\r\n                           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                           intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                           startActivity(intent);\r\n\r\n                           finish();\r\n                       }\r\n                  }\r\n                  else\r\n                  {\r\n                      common.showToast(\"Invalid OTP\");\r\n                  }\r\n\r\n              }\r\n\r\n          }\r\n        }\r\n        else if(view.getId() == R.id.btn_resend)\r\n        {\r\n           // et_otp.setText (\"\");\r\n            mobile=et_phone.getText().toString();\r\n            otp=common.getRandomKey(6);\r\n            if(mobile.isEmpty())\r\n            {\r\n                common.showToast(\"Enter Mobile Number\");\r\n                et_phone.requestFocus();\r\n            }\r\n            else if(mobile.length()!=10)\r\n            {\r\n                common.showToast(\"Invalid Mobile Number\");\r\n                et_phone.requestFocus();\r\n            }\r\n            else\r\n            {\r\n                if(type.equalsIgnoreCase(\"f\"))\r\n                {\r\n                    sendOtpforPass(mobile,otp,URL_GENERATE_OTP);\r\n                }\r\n                else\r\n                {\r\n                    sendOtpforPass(mobile,otp,URL_VERIFICATION);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void sendOtpforPass(final String mobile, final String otp1, String url) {\r\n        loadingBar.show();\r\n        HashMap<String, String> params=new HashMap<>();\r\n        params.put(\"mobile\",mobile);\r\n        params.put(\"otp\",otp1);\r\n        if(!otp1.isEmpty ()){\r\n         et_otp.getText ().clear ();\r\n        }\r\n        Log.e ( \"sendOtpforPass: \",params.toString () );\r\n        CustomJsonRequest customJsonRequest=new CustomJsonRequest(Request.Method.POST, url, params, new Response.Listener<JSONObject>() {\r\n            @Override\r\n            public void onResponse(JSONObject response) {\r\n                Log.e(\"gen_ottt\",\"\"+response.toString());\r\n                loadingBar.dismiss();\r\n                try\r\n                {\r\n                    String res=response.getString(\"status\");\r\n                    if(res.equalsIgnoreCase(\"success\"))\r\n                    {\r\n//                        if(rel_verify.getVisibility() == View.GONE)\r\n//                        {\r\n                            rel_verify.setVisibility(View.VISIBLE);\r\n                            Log.e (\"check_otp\", \"onResponse: \"+msg_status+\" :: \"+otp1+\" :: \"+mobile+\" :: \"+type );\r\n                            if(msg_status.equals(\"0\"))\r\n                            {\r\n                                if(countDownTimer!=null){\r\n                                    countDownTimer.cancel ();\r\n                                }\r\n                                countDownTimer=new CountDownTimer(5000,1000) {\r\n                                    @Override\r\n                                    public void onTick(long l) {\r\n\r\n                                    }\r\n\r\n                                    @Override\r\n                                    public void onFinish() {\r\n                                      //  et_otp.setOtp (otp);\r\n                                        et_otp.setText (otp1);\r\n                                    }\r\n                                }.start ();\r\n\r\n                            }\r\n                            else\r\n                            {\r\n                                getSmsOtp();\r\n                            }\r\n\r\n//                        }\r\n                        rel_gen.setVisibility(View.GONE);\r\n                        setCounterTimer(120000,tv_timer);\r\n                        common.showToast(response.getString(\"message\"));\r\n                    }\r\n                    else\r\n                    {\r\n                        common.showToast(response.getString(\"message\"));\r\n                    }\r\n                }\r\n                catch (Exception ex)\r\n                {\r\n                    ex.printStackTrace();\r\n                    common.showToast(\"Something went wrong\");\r\n                }\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                loadingBar.dismiss();\r\n                String msg=common.VolleyErrorMessage(error);\r\n                if(!msg.isEmpty())\r\n                {\r\n                    common.showToast(\"\"+msg);\r\n                }\r\n            }\r\n        });\r\n        AppController.getInstance().addToRequestQueue(customJsonRequest);\r\n\r\n    }\r\n\r\n    public void  setCounterTimer(long diff,final TextView txt_timer)\r\n    {\r\n        txt_timer.setTextColor(getResources().getColor(R.color.redColor));\r\n\r\n        if(cTimer!=null){\r\n            cTimer.cancel ();\r\n        }\r\n           cTimer = new CountDownTimer(diff, 1000) {\r\n            @Override\r\n            public void onTick(long millisUntilFinished) {\r\n                String text = String.format(Locale.getDefault(), \" %02d : %02d : %02d \",\r\n\r\n                        TimeUnit.MILLISECONDS.toHours(millisUntilFinished) % 60, TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished) % 60,\r\n                        TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) % 60);\r\n                txt_timer.setText(text);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFinish() {\r\n                //otp=\"\";\r\n                txt_timer.setText(\"Timeout\");\r\n                txt_timer.setTextColor(getResources().getColor(R.color.lowColor));\r\n                if(btn_resend.getVisibility() == View.GONE)\r\n                {\r\n                    btn_resend.setVisibility(View.VISIBLE);\r\n                }\r\n\r\n            }\r\n        }.start();\r\n\r\n    }\r\n    private boolean checkAndRequestPermissions()\r\n    {\r\n        int sms = ContextCompat.checkSelfPermission(this, Manifest.permission.READ_SMS);\r\n\r\n        if (sms != PackageManager.PERMISSION_GRANTED)\r\n        {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_SMS}, REQUEST_ID_MULTIPLE_PERMISSIONS);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    public void getSmsOtp()\r\n    {\r\n        try\r\n        {\r\n\r\n\r\n            SmsReceiver.bindListener(new SmsListener() {\r\n                @Override\r\n                public void messageReceived(String messageText) {\r\n\r\n                    //From the received text string you may do string operations to get the required OTP\r\n                    //It depends on your SMS format\r\n                    Log.e(\"Message\",messageText);\r\n                    // Toast.makeText(SmsVerificationActivity.this,\"Message: \"+messageText,Toast.LENGTH_LONG).show();\r\n\r\n                    // If your OTP is six digits number, you may use the below code\r\n\r\n                    Pattern pattern = Pattern.compile(OTP_REGEX);\r\n                    Matcher matcher = pattern.matcher(messageText);\r\n                    String otp=\"\";\r\n                    while (matcher.find())\r\n                    {\r\n                        otp = matcher.group();\r\n                    }\r\n\r\n                    if(!(otp.isEmpty() || otp.equals(\"\")))\r\n                    {\r\n//                        et_otp.setOtp (otp);\r\n                        et_otp.setText (otp);\r\n\r\n\r\n                    }\r\n\r\n                    //           Toast.makeText(SmsVerificationActivity.this,\"OTP: \"+ otp ,Toast.LENGTH_LONG).show();\r\n\r\n                }\r\n            });\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            // Toast.makeText(SmsVerificationActivity.this,\"\"+ex.getMessage(),Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n    public void forgetPasswordWhatsapp()\r\n    {\r\n        HashMap<String,String> params = new HashMap<>();\r\n        common.postRequest(URL_FORGET_PASSWORD_WHATSAPP, params, new Response.Listener<String>() {\r\n            @Override\r\n            public void onResponse(String response) {\r\n             Log.e(\"whatsapp_dgfghuji\",response.toString());\r\n                try {\r\n                    JSONArray array = new JSONArray(response);\r\n                    ForgetWhatsappModel whatsappModel = new ForgetWhatsappModel();\r\n                    JSONObject object = array.getJSONObject(0);\r\n                    whatsappModel.setId(object.getString(\"id\"));\r\n                    whatsappModel.setWhatsapp_no(object.getString(\"whatsapp_no\"));\r\n                    whatsappModel.setWhatsapp_msg(object.getString(\"whatsapp_msg\"));\r\n                    whatsappModel.setInfo_text(object.getString(\"info_text\"));\r\n                    whatsappModel.setNo_visible(object.getString(\"no_visible\"));\r\n                    whatsappModel.setStatus(object.getString(\"status\"));\r\n                    wList.add(whatsappModel);\r\n\r\n                    tv_whatsappMsg.setText(wList.get(0).getInfo_text());\r\n                    btn_whatsapp.setOnClickListener(new View.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(String.format(\"https://api.whatsapp.com/send?phone=%s&text=%s\",wList.get(0).getWhatsapp_no(),wList.get(0).getWhatsapp_msg()))));\r\n                        }\r\n                    });\r\n\r\n\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/in/matka/ns/Activity/VerificationActivity.java	(revision 060bb680d3083f3702a0fda1244ed1a3d1849332)
+++ app/src/main/java/in/matka/ns/Activity/VerificationActivity.java	(date 1616737862514)
@@ -48,6 +48,7 @@
 import retrofit2.http.FormUrlEncoded;
 
 import static in.matka.ns.Activity.splash_activity.msg_status;
+
 import static in.matka.ns.Config.BaseUrls.URL_FORGET_PASSWORD_WHATSAPP;
 import static in.matka.ns.Config.BaseUrls.URL_GENERATE_OTP;
 import static in.matka.ns.Config.BaseUrls.URL_VERIFICATION;
Index: app/src/main/java/in/matka/ns/Config/BaseUrls.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package in.matka.ns.Config;\r\n\r\n/**\r\n * Developed by Binplus Technologies pvt. ltd.  on 21,June,2020\r\n */\r\npublic class BaseUrls {\r\n\r\n    public static final String BASE_URL=\"https://ns.anshuwap.com/Api/\";\r\n\r\n    public static final String BASE_IMAGE_URL=\"https://roseflavour.com/assets/images/\";\r\n    public static final String IMG_SLIDER_URL =BASE_IMAGE_URL+ \"sliders/\";\r\n    public static final String IMG_DIALOG_URL =BASE_IMAGE_URL+ \"dialog/\";\r\n    public static final String URL_INDEX=BASE_URL+\"getIndex\";\r\n    public static final String URL_LOGIN=BASE_URL+\"login\";\r\n    public static final String URL_REGISTER=BASE_URL+\"sign_up\";\r\n    public static final String URL_REQUEST=BASE_URL+\"add_request\";\r\n    public static final String URL_GET_WALLET_AMOUNT=BASE_URL+\"getWalletAmount\";\r\n    public static final String URL_Matka=BASE_URL+\"getMatkas\";\r\n    public static final String URL_MENU = BASE_URL+\"getMenu\";\r\n    public static final String URL_STARLINE=BASE_URL+\"get_starline\";\r\n//    public static final String URL_STARLINE=\"https://smartmatka.com/api/get_starline\";\r\n    public static final String URL_MATKA_WITH_ID=BASE_URL+\"get_matka_with_id\";\r\n    public static final String URL_PLAY=BASE_URL+\"how_to_play\";\r\n    public static final String URL_NOTICE=BASE_URL+\"getNotice\";\r\n    public static final String URL_SLIDERS=BASE_URL+\"get_sliders\";\r\n    public static final String URL_UPDATE_PASS=BASE_URL+\"forgot_password\";\r\n    public static final String URL_VERIFICATION=BASE_URL+\"mobile_verification\";\r\n    public static final String URL_GENERATE_OTP=BASE_URL+\"generate_otp\";\r\n    public static final String URL_BID_HISTORY=BASE_URL+\"getBidHistory\";\r\n    public static final String URL_MOBILE=BASE_URL+\"getMobile\";\r\n    public static final String URL_INSERT_DATA=BASE_URL+\"insert_data\";\r\n    public static final String URL_StarLine_id = BASE_URL+\"starline_data.php\";\r\n    public static final String URL_DpMotor = BASE_URL+\"get_dpmotor\";\r\n    public static final String URL_SpMotor = BASE_URL+\"getSpMotor\";\r\n    public static final String Url_req_history=BASE_URL+\"request_history\";\r\n    public static final String Url_wthdraw_req_history=BASE_URL+\"withdraw_history\";\r\n    public static final String Url_transaction_history=BASE_URL+\"transaction\";\r\n    public static final String URL_GET_HISTORY=BASE_URL+\"get_history\";\r\n    public static final String URL_FUND_HISTORY=BASE_URL+\"request_history\";\r\n    public static final String URL_GET_GAMES=BASE_URL+\"getGames\";\r\n    public static final String URL_GET_GATEWAY=BASE_URL+\"gateway_setting\";\r\n    public static final String URL_STARLINE_HISTORY=BASE_URL+\"getstarline_history\";\r\n    public static final String URL_NOTICEBOARD=\"https://roseflavour.com/api/getNoticeboard\";\r\n    public static final String URL_GETSTATUS=BASE_URL+\"getLoginStatus\";\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/in/matka/ns/Config/BaseUrls.java	(revision 060bb680d3083f3702a0fda1244ed1a3d1849332)
+++ app/src/main/java/in/matka/ns/Config/BaseUrls.java	(date 1616737862526)
@@ -42,6 +42,7 @@
     public static final String URL_STARLINE_HISTORY=BASE_URL+"getstarline_history";
     public static final String URL_NOTICEBOARD="https://roseflavour.com/api/getNoticeboard";
     public static final String URL_GETSTATUS=BASE_URL+"getLoginStatus";
+    public static final String URL_FORGET_PASSWORD_WHATSAPP= BASE_URL+"password_details";
 
 
 }
